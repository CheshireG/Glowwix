;主引导程序
;LOADER_BASE_ADDR equ 0xA000
;LOADER_START_SECTOR equ 0x2
;----------------------------------------------------------
SECTION MBR vstart=0x7c00
    mov ax,cs
    mov fs,ax
    mov sp,0x7c00

    mov ax,0xb800               ;显存文本模式中,其内存地址是0xb8000
    mov gs,ax

;----------------------------------------------------------
;清屏利用0x06号功能，上卷全部的行，即可实现清屏
;INT 0x10 功能号：0x06  功能描述：上卷窗口
	SECTION MBR vstart=0x7c00
                                ;下标从0开始，所以0x18=24 0x4f=79
    int 0x10                    ;int 0x10

;--------------------------------------------------------------------
;通过直接操作显卡改进mbr.S，打印字符串
;输出背景色绿色，前景色红色，不断跳动闪烁的字符串“1 MBR”
;--------------------------------------------------------------------
    mov byte [gs:0x00],'1'      ;从显存的第0个字节，也就是字符在左上角出现
    mov byte [gs:0x01],0xA4     ;A代表绿色背景闪烁，4表示前景色为红色
                                ;这里使用8位表示字符的属性
                                ;1010 0100 对应 KRGB(背景) IRGB(前景)
    mov byte [gs:0x02],' '
    mov byte [gs:0x03],0xA4

    mov byte [gs:0x04],'M'
    mov byte [gs:0x05],0xA4

    mov byte [gs:0x06],'B'
    mov byte [gs:0x07],0xA4

    mov byte [gs:0x08],'R'
    mov byte [gs:0x09],0xA4

;--------------------------------------------------------------------
;程序的悬停和补齐
;--------------------------------------------------------------------
    jmp $                       ;死循环悬停

    times 510 -($-$$) db 0      ;本行减去本section 
    db 0x55,0xaa             